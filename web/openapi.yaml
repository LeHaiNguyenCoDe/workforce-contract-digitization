openapi: 3.0.3
info:
  title: E-Commerce API
  description: |
    API documentation for E-Commerce system with Frontend (Landing Page & Customer) and Admin endpoints.

    ## Structure
    - **Frontend API** (`/api/v1/*`): For landing page and customer operations
    - **Admin API** (`/api/v1/admin/*`): For admin panel management (requires admin/manager role)

    ## Authentication
    - Session-based authentication using `laravel_session` cookie
    - Admin routes require authentication + admin/manager role

    ## Usage in Hoppscotch
    1. Import this OpenAPI file into Hoppscotch
    2. Select server (default: http://workforce_contract_digitization.io/api/v1)
    3. **IMPORTANT**: Go to Settings â†’ Enable "Save Response Cookies"
    4. Call `/login` endpoint first with email and password
    5. Hoppscotch will automatically save the `laravel_session` cookie from Set-Cookie header
    6. All subsequent authenticated requests will automatically include the cookie
    7. If you get "Unauthenticated" error, make sure:
       - You've logged in first via `/login`
       - "Save Response Cookies" is enabled in Hoppscotch settings
       - Cookie is present in the request (check in Request Headers)
  version: 2.0.0
  contact:
    name: API Support
    email: support@workforce_contract_digitization.io

servers:
  - url: http://workforce_contract_digitization.io/api/v1
    description: Local Development Server
  - url: https://workforce_contract_digitization.io/api/v1
    description: Production Server

tags:
  # Frontend Tags
  - name: Frontend - Authentication
    description: Frontend authentication endpoints
  - name: Frontend - Language
    description: Language management for frontend
  - name: Frontend - Products
    description: Product browsing for customers
  - name: Frontend - Categories
    description: Category browsing
  - name: Frontend - Cart
    description: Shopping cart (session-based)
  - name: Frontend - Orders
    description: Customer order management
  - name: Frontend - Wishlist
    description: Customer wishlist
  - name: Frontend - Reviews
    description: Product reviews
  - name: Frontend - Articles
    description: Blog/articles for frontend
  - name: Frontend - Promotions
    description: Promotions viewing
  - name: Frontend - Loyalty
    description: Loyalty program for customers
  - name: Frontend - Profile
    description: User profile management

  # Admin Tags
  - name: Admin - Users
    description: User management (admin only)
  - name: Admin - Products
    description: Product management (admin only)
  - name: Admin - Categories
    description: Category management (admin only)
  - name: Admin - Orders
    description: Order management (admin only)
  - name: Admin - Promotions
    description: Promotion management (admin only)
  - name: Admin - Warehouses
    description: Warehouse management (admin only)
  - name: Admin - Articles
    description: Article/blog management (admin only)
  - name: Admin - Reviews
    description: Review management (admin only)

paths:

  /login:
    post:
      tags: [Frontend - Authentication]
      summary: User login
      description: Authenticate user and create session. Returns session cookie for subsequent requests.
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email:
                  type: string
                  format: email
                  example: customer@example.com
                password:
                  type: string
                  format: password
                  description: Password must be at least 8 characters, contain at least one letter, one number, and one special character (@, $, !, %, *, ?, or &)
                  example: Password123!
                remember:
                  type: boolean
                  example: false
            example:
              email: customer@example.com
              password: Password123!
              remember: false
      responses:
        '200':
          description: Login successful. Session cookie will be set automatically in Set-Cookie header. Hoppscotch will automatically save and use this cookie for subsequent requests.
          headers:
            Set-Cookie:
              description: Session cookie for authentication
              schema:
                type: string
                example: laravel_session=eyJpdiI6InNlc3Npb25faWQiLCJ2YWx1ZSI6InNlc3Npb25fdmFsdWUiLCJtYWMiOiJtYWNfdmFsdWUifQ%3D%3D; Path=/; HttpOnly; SameSite=Lax
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              example:
                status: success
                message: Login successful
                data:
                  user:
                    id: 1
                    name: John Doe
                    email: customer@example.com
                    active: true
                    language: vi
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '422':
          $ref: '#/components/responses/ValidationError'

  /logout:
    post:
      tags: [Frontend - Authentication]
      summary: User logout
      description: Logout user and destroy session
      operationId: logout
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                status: success
                message: Logout successful

  /register:
    post:
      tags: [Frontend - Authentication]
      summary: Register new user
      description: Create a new user account (public endpoint)
      operationId: register
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
            example:
              name: John Doe
              email: john@example.com
              password: Password123!
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
              example:
                status: success
                message: User created
                data:
                  id: 1
                  name: John Doe
                  email: john@example.com
                  active: true
                  language: vi
        '422':
          $ref: '#/components/responses/ValidationError'

  /language:
    get:
      tags: [Frontend - Language]
      summary: Get current language
      description: Get the current language locale and info
      parameters:
        - name: Accept-Language
          in: header
          schema:
            type: string
            default: vi
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LanguageResponse'
    post:
      tags: [Frontend - Language]
      summary: Set language preference
      description: Set language preference (requires authentication)
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [locale]
              properties:
                locale:
                  type: string
                  enum: [vi, en]
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /language/supported:
    get:
      tags: [Frontend - Language]
      summary: Get supported languages
      description: Get list of all supported languages
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SupportedLanguagesResponse'

  /products:
    get:
      tags: [Frontend - Products]
      summary: Get all products
      description: Get paginated list of products with filters (public)
      operationId: getProducts
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 12
            minimum: 1
            maximum: 100
          example: 12
        - name: search
          in: query
          schema:
            type: string
          example: laptop
        - name: category_id
          in: query
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductListResponse'
              example:
                status: success
                data:
                  current_page: 1
                  data:
                    - id: 1
                      name: Laptop Dell XPS
                      slug: laptop-dell-xps
                      price: 25000000
                      thumbnail: https://example.com/images/laptop.jpg
                      short_description: High performance laptop
                  per_page: 12
                  total: 50

  /products/{id}:
    get:
      tags: [Frontend - Products]
      summary: Get product details
      description: Get detailed product information (public)
      operationId: getProductById
      parameters:
        - name: id
          in: path
          required: true
          description: Product ID
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetailResponse'
              example:
                status: success
                data:
                  id: 1
                  name: Laptop Dell XPS
                  slug: laptop-dell-xps
                  price: 25000000
                  description: High performance laptop
                  category:
                    id: 1
                    name: Laptops
                  images:
                    - id: 1
                      image_url: https://example.com/images/laptop-1.jpg
                      is_main: true
                  variants:
                    - id: 1
                      color: Black
                      stock: 10
                  rating:
                    avg: 4.5
                    count: 25
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories:
    get:
      tags: [Frontend - Categories]
      summary: Get all categories
      description: Get list of all categories (public)
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryListResponse'

  /categories/{id}:
    get:
      tags: [Frontend - Categories]
      summary: Get category details
      description: Get category by ID (public)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'

  /categories/{id}/products:
    get:
      tags: [Frontend - Products]
      summary: Get products by category
      description: Get products filtered by category ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          schema:
            type: integer
            default: 12
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductListResponse'

  /products/{id}/reviews:
    get:
      tags: [Frontend - Reviews]
      summary: Get product reviews
      description: Get reviews for a specific product (public)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
    post:
      tags: [Frontend - Reviews]
      summary: Create review
      description: Create a review for a product (requires authentication)
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [rating]
              properties:
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                content:
                  type: string
      responses:
        '201':
          description: Review created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'

  /cart:
    get:
      tags: [Frontend - Cart]
      summary: Get cart
      description: Get current shopping cart (session-based, no auth required)
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'

  /cart/items:
    post:
      tags: [Frontend - Cart]
      summary: Add item to cart
      description: Add product to shopping cart
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [product_id, qty]
              properties:
                product_id:
                  type: integer
                product_variant_id:
                  type: integer
                  nullable: true
                qty:
                  type: integer
                  minimum: 1
      responses:
        '201':
          description: Item added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /cart/items/{id}:
    put:
      tags: [Frontend - Cart]
      summary: Update cart item
      description: Update quantity of cart item
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [qty]
              properties:
                qty:
                  type: integer
                  minimum: 1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
    delete:
      tags: [Frontend - Cart]
      summary: Remove cart item
      description: Remove item from cart
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /articles:
    get:
      tags: [Frontend - Articles]
      summary: Get all articles
      description: Get paginated list of articles (public)
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 6
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleListResponse'

  /articles/{id}:
    get:
      tags: [Frontend - Articles]
      summary: Get article details
      description: Get article by ID (public)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleResponse'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /promotions:
    get:
      tags: [Frontend - Promotions]
      summary: Get all promotions
      description: Get paginated list of promotions (public)
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromotionListResponse'

  /promotions/{id}:
    get:
      tags: [Frontend - Promotions]
      summary: Get promotion details
      description: Get promotion by ID (public)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromotionResponse'


  /me:
    get:
      tags: [Frontend - Authentication]
      summary: Get current user
      description: Get authenticated user information
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /profile:
    get:
      tags: [Frontend - Profile]
      summary: Get user profile
      description: Get own profile (requires authentication)
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
    put:
      tags: [Frontend - Profile]
      summary: Update user profile
      description: Update own profile (requires authentication)
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '422':
          $ref: '#/components/responses/ValidationError'

  /orders:
    get:
      tags: [Frontend - Orders]
      summary: Get user orders
      description: Get orders for authenticated user
      security:
        - cookieAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
    post:
      tags: [Frontend - Orders]
      summary: Create order
      description: Create order from cart (requires authentication)
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
      responses:
        '201':
          description: Order created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          description: Bad request (e.g., cart is empty)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /orders/{id}:
    get:
      tags: [Frontend - Orders]
      summary: Get order details
      description: Get order details by ID (requires authentication)
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /wishlist:
    get:
      tags: [Frontend - Wishlist]
      summary: Get wishlist
      description: Get user wishlist (requires authentication)
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WishlistResponse'
    post:
      tags: [Frontend - Wishlist]
      summary: Add to wishlist
      description: Add product to wishlist (requires authentication)
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [product_id]
              properties:
                product_id:
                  type: integer
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /wishlist/{id}:
    delete:
      tags: [Frontend - Wishlist]
      summary: Remove from wishlist
      description: Remove product from wishlist (requires authentication)
      security:
        - cookieAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /loyalty:
    get:
      tags: [Frontend - Loyalty]
      summary: Get loyalty account
      description: Get loyalty account and transactions (requires authentication)
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoyaltyResponse'


  /admin/users:
    get:
      tags: [Admin - Users]
      summary: Get all users
      description: Get paginated list of users (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 15
        - name: search
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Users]
      summary: Create user
      description: Create new user (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreateRequest'
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/users/{id}:
    get:
      tags: [Admin - Users]
      summary: Get user by ID
      description: Get user details by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
    put:
      tags: [Admin - Users]
      summary: Update user
      description: Update user information (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Users]
      summary: Delete user
      description: Delete user (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /admin/users/{id}/orders:
    get:
      tags: [Admin - Users]
      summary: Get user orders
      description: Get orders for a specific user (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/products:
    get:
      tags: [Admin - Products]
      summary: Get all products
      description: Get paginated list of products (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 12
        - name: search
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Products]
      summary: Create product
      description: Create new product (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
      responses:
        '201':
          description: Product created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetailResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/products/{id}:
    get:
      tags: [Admin - Products]
      summary: Get product details
      description: Get product by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetailResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
    put:
      tags: [Admin - Products]
      summary: Update product
      description: Update product (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetailResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Products]
      summary: Delete product
      description: Delete product (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/categories:
    get:
      tags: [Admin - Categories]
      summary: Get all categories
      description: Get list of all categories (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Categories]
      summary: Create category
      description: Create new category (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryCreateRequest'
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/categories/{id}:
    get:
      tags: [Admin - Categories]
      summary: Get category details
      description: Get category by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    put:
      tags: [Admin - Categories]
      summary: Update category
      description: Update category (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Categories]
      summary: Delete category
      description: Delete category (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/orders:
    get:
      tags: [Admin - Orders]
      summary: Get all orders
      description: Get all orders (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/orders/{id}:
    get:
      tags: [Admin - Orders]
      summary: Get order details
      description: Get order details by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /admin/orders/{id}/status:
    put:
      tags: [Admin - Orders]
      summary: Update order status
      description: Update order status (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [pending, processing, shipped, delivered, cancelled]
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/promotions:
    get:
      tags: [Admin - Promotions]
      summary: Get all promotions
      description: Get paginated list of promotions (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromotionListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Promotions]
      summary: Create promotion
      description: Create new promotion (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromotionCreateRequest'
      responses:
        '201':
          description: Promotion created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromotionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/promotions/{id}:
    get:
      tags: [Admin - Promotions]
      summary: Get promotion details
      description: Get promotion by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromotionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    put:
      tags: [Admin - Promotions]
      summary: Update promotion
      description: Update promotion (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromotionUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromotionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Promotions]
      summary: Delete promotion
      description: Delete promotion (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/warehouses:
    get:
      tags: [Admin - Warehouses]
      summary: Get all warehouses
      description: Get list of warehouses (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Warehouses]
      summary: Create warehouse
      description: Create new warehouse (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WarehouseCreateRequest'
      responses:
        '201':
          description: Warehouse created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/warehouses/{id}:
    get:
      tags: [Admin - Warehouses]
      summary: Get warehouse details
      description: Get warehouse by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    put:
      tags: [Admin - Warehouses]
      summary: Update warehouse
      description: Update warehouse (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WarehouseUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Warehouses]
      summary: Delete warehouse
      description: Delete warehouse (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/warehouses/{id}/stocks:
    get:
      tags: [Admin - Warehouses]
      summary: Get warehouse stocks
      description: Get stock information for warehouse (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StockListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Warehouses]
      summary: Update warehouse stock
      description: Update stock for warehouse (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [product_id, quantity]
              properties:
                product_id:
                  type: integer
                product_variant_id:
                  type: integer
                  nullable: true
                quantity:
                  type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/articles:
    get:
      tags: [Admin - Articles]
      summary: Get all articles
      description: Get paginated list of articles (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags: [Admin - Articles]
      summary: Create article
      description: Create new article (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleCreateRequest'
      responses:
        '201':
          description: Article created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/articles/{id}:
    get:
      tags: [Admin - Articles]
      summary: Get article details
      description: Get article by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    put:
      tags: [Admin - Articles]
      summary: Update article
      description: Update article (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleUpdateRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Articles]
      summary: Delete article
      description: Delete article (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/articles/{id}/publish:
    post:
      tags: [Admin - Articles]
      summary: Publish article
      description: Publish article (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/articles/{id}/unpublish:
    post:
      tags: [Admin - Articles]
      summary: Unpublish article
      description: Unpublish article (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/reviews:
    get:
      tags: [Admin - Reviews]
      summary: Get all reviews
      description: Get all reviews (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/reviews/{id}:
    get:
      tags: [Admin - Reviews]
      summary: Get review details
      description: Get review by ID (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    delete:
      tags: [Admin - Reviews]
      summary: Delete review
      description: Delete review (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/reviews/{id}/approve:
    put:
      tags: [Admin - Reviews]
      summary: Approve review
      description: Approve review (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /admin/reviews/{id}/reject:
    put:
      tags: [Admin - Reviews]
      summary: Reject review
      description: Reject review (admin only)
      security:
        - cookieAuth: []
        - adminAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '403':
          $ref: '#/components/responses/ForbiddenError'

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: laravel_session
      description: Session cookie for authentication (required for authenticated endpoints)
    adminAuth:
      type: apiKey
      in: cookie
      name: laravel_session
      description: Session cookie with admin/manager role (required for admin endpoints)

  schemas:
    SuccessResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
          example: Operation completed successfully

    ErrorResponse:
      type: object
      properties:
        status:
          type: string
          example: error
        message:
          type: string
          example: An error occurred

    LanguageResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        data:
          type: object
          properties:
            locale:
              type: string
              example: vi
            info:
              type: object

    SupportedLanguagesResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object
          properties:
            locales:
              type: array
              items:
                type: object
            current:
              type: string

    LoginResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'

    User:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        email:
          type: string
          format: email
        active:
          type: boolean
        language:
          type: string

    UserResponse:
      type: object
      properties:
        status:
          type: string
        data:
          $ref: '#/components/schemas/User'

    UserListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object
          properties:
            current_page:
              type: integer
            data:
              type: array
              items:
                $ref: '#/components/schemas/User'
            total:
              type: integer
            per_page:
              type: integer

    UserCreateRequest:
      type: object
      required: [name, email, password]
      properties:
        name:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          minLength: 8
          maxLength: 255
          pattern: '^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$'
          description: Password must be at least 8 characters, contain at least one letter, one number, and one special character (@, $, !, %, *, ?, or &)
          example: Password123!

    UserUpdateRequest:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
          format: email
        language:
          type: string

    CategoryResponse:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        slug:
          type: string
        parent_id:
          type: integer
          nullable: true

    CategoryListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: array
          items:
            $ref: '#/components/schemas/CategoryResponse'

    CategoryCreateRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
        slug:
          type: string
        parent_id:
          type: integer
          nullable: true

    CategoryUpdateRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        parent_id:
          type: integer
          nullable: true

    ProductListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object
          properties:
            current_page:
              type: integer
            data:
              type: array
              items:
                type: object
            total:
              type: integer

    ProductDetailResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
            price:
              type: integer
            description:
              type: string
            category:
              type: object
            images:
              type: array
              items:
                type: object
            variants:
              type: array
              items:
                type: object

    ProductCreateRequest:
      type: object
      required: [category_id, name, price]
      properties:
        category_id:
          type: integer
        name:
          type: string
        slug:
          type: string
        price:
          type: integer
        short_description:
          type: string
        description:
          type: string
        thumbnail:
          type: string
        specs:
          type: object

    ProductUpdateRequest:
      type: object
      properties:
        category_id:
          type: integer
        name:
          type: string
        slug:
          type: string
        price:
          type: integer
        short_description:
          type: string
        description:
          type: string
        thumbnail:
          type: string
        specs:
          type: object

    CartResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object
          properties:
            items:
              type: array
            total:
              type: integer

    OrderCreateRequest:
      type: object
      required: [full_name, phone, address_line, payment_method]
      properties:
        full_name:
          type: string
        phone:
          type: string
        email:
          type: string
          format: email
        address_line:
          type: string
        ward:
          type: string
        district:
          type: string
        province:
          type: string
        payment_method:
          type: string
          enum: [cod, credit_card, bank_transfer, e_wallet]
        note:
          type: string
        promotion_code:
          type: string
        use_points:
          type: integer
          minimum: 0

    OrderResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    OrderListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    WishlistResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: array

    ReviewResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    ReviewListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    PromotionResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    PromotionListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    PromotionCreateRequest:
      type: object
      required: [name, type, value]
      properties:
        name:
          type: string
        code:
          type: string
        type:
          type: string
          enum: [percent, fixed_amount]
        value:
          type: integer
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
        is_active:
          type: boolean

    PromotionUpdateRequest:
      type: object
      properties:
        name:
          type: string
        code:
          type: string
        type:
          type: string
        value:
          type: integer
        is_active:
          type: boolean

    LoyaltyResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object
          properties:
            points:
              type: integer
            transactions:
              type: array

    ArticleResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    ArticleListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    ArticleCreateRequest:
      type: object
      required: [title]
      properties:
        title:
          type: string
        slug:
          type: string
        thumbnail:
          type: string
        content:
          type: string
        published_at:
          type: string
          format: date-time
          nullable: true

    ArticleUpdateRequest:
      type: object
      properties:
        title:
          type: string
        slug:
          type: string
        thumbnail:
          type: string
        content:
          type: string
        published_at:
          type: string
          format: date-time
          nullable: true

    WarehouseResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: object

    WarehouseListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: array

    WarehouseCreateRequest:
      type: object
      required: [name, code]
      properties:
        name:
          type: string
        code:
          type: string
        address:
          type: string
        is_active:
          type: boolean

    WarehouseUpdateRequest:
      type: object
      properties:
        name:
          type: string
        code:
          type: string
        address:
          type: string
        is_active:
          type: boolean

    StockListResponse:
      type: object
      properties:
        status:
          type: string
        data:
          type: array

  responses:
    UnauthorizedError:
      description: Unauthorized - Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    ForbiddenError:
      description: Forbidden - Admin privileges required
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
                example: error
              message:
                type: string
                example: Access denied. Admin privileges required.

    NotFoundError:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
                example: error
              message:
                type: string
              errors:
                type: object
